(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{1194:function(e,r,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return c(6465)}])},7632:function(e,r,c){"use strict";var a=c(4246),t=c(8630),n=c.n(t),s=c(7378);let o=(0,s.forwardRef)((e,r)=>{let{children:c,className:t="",initialIsOpen:o=!1}=e,[l,i]=(0,s.useState)(o);return(0,s.useImperativeHandle)(r,()=>({open(){i(!0)},close(){i(!1)}})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(n().overlay," ").concat(l?n().opened:""),onClick:()=>{i(!1)}}),(0,a.jsx)("div",{className:"".concat(n().popup," ").concat(l?n().opened:""," ").concat(t),children:c})]})});r.Z=o},6465:function(e,r,c){"use strict";c.r(r),c.d(r,{default:function(){return p}});var a=c(4246),t=c(7378),n=c(5638),s=c(3486),o=c(6677),l=c(6069),i=c(5645),d=c(7632),u=c(8939),m=c.n(u);let v=(0,t.forwardRef)((e,r)=>{let{}=e,c=(0,t.useRef)(null),n=(0,t.useRef)(null),s=(0,t.useRef)(null),o=(0,t.useRef)(null),d=(0,t.useRef)(null),u=(0,t.useRef)(i.ZP.timeline({repeat:-1,repeatDelay:.5,paused:!0}));return(0,t.useImperativeHandle)(r,()=>({restart(){u.current&&u.current.restart()},pause(){u.current&&u.current.pause()}})),(0,t.useEffect)(()=>{c.current&&n.current&&s.current&&o.current&&d.current&&u.current&&(u.current.set(d.current,{opacity:0}),u.current.to(d.current,{opacity:1}),u.current.set(c.current,{className:"z_0 card ".concat(l.l3.en.techdept.className," ").concat(m().card," ").concat(m().active),delay:.5}),u.current.set(o.current,{className:"z_0 card ".concat(l.l3.en.refactoring.className," ").concat(m().card," ").concat(m().active)},">+.5"),u.current.set(c.current,{className:"z_0 card ".concat(l.l3.en.techdept.className," ").concat(m().card)},">.5"),u.current.set(o.current,{className:"z_0 card ".concat(l.l3.en.refactoring.className," ").concat(m().card)},"<"),u.current.to(c.current,{x:"100%"}),u.current.to(o.current,{x:"-100%"},"<"),u.current.to(n.current,{opacity:0,scale:.6}),u.current.to(s.current,{opacity:0,scale:.6},"<+.1"),u.current.to(c.current,{opacity:0,scale:.6},"<+.1"),u.current.set(c.current,{y:"-300%",opacity:1,scale:1,className:"z_0 card ".concat(l.l3.en.refactoring.className," ").concat(m().card)}),u.current.set(n.current,{y:"-300%",opacity:1,scale:1,className:"z_0 card ".concat(l.l3.en.techdept.className," ").concat(m().card)},"<"),u.current.set(s.current,{y:"-300%",opacity:1,scale:1,className:"z_0 card ".concat(l.l3.en.bug.className," ").concat(m().card)},"<"),u.current.to(c.current,{y:0,duration:.3}),u.current.to(s.current,{y:0,duration:.3},"<+.1"),u.current.to(n.current,{y:0,duration:.3},"<+.1"),u.current.to(d.current,{opacity:0},">+1"))},[]),(0,a.jsxs)("div",{className:m().container,children:[(0,a.jsx)("div",{className:"text-c text-s ".concat(m().info),children:"Click two neighbour tickets to replace them with each other"}),(0,a.jsxs)("div",{className:"".concat(m().grid),ref:d,children:[(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.onboarding.className," ").concat(m().card),children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.techdept.className," ").concat(m().card),ref:n,children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.bug.className," ").concat(m().card),children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.onboarding.className," ").concat(m().card),children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.techdept.className," ").concat(m().card),ref:s,children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.codereview.className," ").concat(m().card),children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.techdept.className," ").concat(m().card),ref:c,children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.refactoring.className," ").concat(m().card),ref:o,children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})}),(0,a.jsx)("div",{className:"z_0 card ".concat(l.l3.en.bug.className," ").concat(m().card),children:(0,a.jsx)("div",{className:"card__text ".concat(m().text," z_0")})})]}),(0,a.jsx)("div",{className:"text-c text-s ".concat(m().info),children:"Place 3 or more same-type tickets in a line to burn them"})]})});function p(e){let{loaded:r,className:c}=e,u=(0,t.useRef)(null),m=(0,t.useRef)(null),p=(0,t.useRef)(null),b=(0,t.useRef)(null),h=(0,t.useRef)(null),f=(0,o.useRouter)(),_,x=6e4,{dispatch:N,current:k,best:g}=(0,s.bI)("current","best");return(0,t.useEffect)(()=>{if(u.current&&m.current&&p.current){var e={};e.images=l.AK.en,e.selected="",e.scoreboard={},e.scoreboard.points=0,e.scoreboard.allMovements=0,e.scoreboard.combinations=0,e.scoreboard.luck=0,e.scoreboard.broken=0,e.scoreboard.blocks=0,e.scoreboard.corners=0,l.qR.forEach(r=>e.scoreboard[r]=0),e.scoreboard.movements=0,e.animation={},e.animation.velocity=100,e.cell={},e.cell.width=()=>n(".js-roof",u.current)[0].offsetWidth+8,e.createBoard=function(r,c){e.lines=r,e.columns=c,e.board={},e.parts=e.images.length,e.board.lines=[];for(let n=0;n<c;n++){var a=[];for(let c=0;c<r;c++){var t=Math.floor(Math.random()*e.parts);a.push(t)}e.board.lines.push(a)}},e.mountPart=function(e,r,c){return'\n          <div class="js-roof card '.concat(l.AK.en[c],'" id="').concat(e,"-").concat(r,'" data-line="').concat(e,'" data-column="').concat(r,'" data-part="').concat(c,'">\n            <div class="card__text z_0"></div>\n          </div>\n        ')},e.mountBoard=function(r){e.container=r,n(r).html('<div class="board"></div>'),n.each(e.board.lines,function(r,c){n.each(c,function(c,a){n(".board",u.current).append(e.mountPart(r,c,a))})}),n(p.current).html('<div class="rating text_light"><div class="text-s">Tickets</div><div class="value score text-m">0</div><div class="additional-score">matches: <span id="nCombinations">0</span></div><div class="additional-score">match 3: <span id="nBroken">0</span></div><div class="additional-score">match 4: <span id="nBlocks">0</span></div><div class="additional-score">match 5: <span id="nCorners">0</span></div><div class="additional-score">lucky: <span id="nLuck clas=additional-score">0</span></div><div class="additional-score">all moves: <span id="nAllMovements">0</span></div><div class="additional-score">bug: <span id="nBug">0</span></div><div class="additional-score">Tech Dept: <span id="nTechDept">0</span></div><div class="additional-score">Infra: <span id="nInfra">0</span></div><div class="additional-score">Onboarding: <span id="nOnboarding">0</span></div><div class="additional-score">Market Changes: <span id="nMarketChanges">0</span></div><div class="additional-score">Comments: <span id="nComments">0</span></div><div class="additional-score">moves: <span id="nMovements">0</span></div></div>')},e.scoreboard.increments=function(r){let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(r){case"combination":e.scoreboard.combinations++,n("#nCombinations",u.current).html(e.scoreboard.combinations);break;case"luck":e.scoreboard.luck++,n("#nLuck",u.current).html(e.scoreboard.luck),e.scoreboard.points+=2,u.current,n(".score",u.current).html(e.scoreboard.points);break;case"crack":e.scoreboard.broken++,n("#nBroken",u.current).html(e.scoreboard.broken),e.scoreboard.points+=3,n(".score",u.current).html(e.scoreboard.points);break;case"block":e.scoreboard.blocks++,n("#nBlocks").html(e.scoreboard.blocks),e.scoreboard.points+=4,n(".score",u.current).html(e.scoreboard.points);break;case"corner":e.scoreboard.corners++,n("#nCorners").html(e.scoreboard.corners),e.scoreboard.points+=5,n(".score",u.current).html(e.scoreboard.points);break;case"movement":e.scoreboard.allMovements++,e.scoreboard.movements++,n("#nAllMovements",u.current).html(e.scoreboard.allMovements),n("#nMovements",u.current).html(e.scoreboard.movements);break;case"reset movements":e.scoreboard.movements=0,n("#nMovements",u.current).html(e.scoreboard.movements)}l.qR.includes(r)&&(e.scoreboard[r]+=c)},e.askForExchange=function(r){if(""===e.selected)e.selected=r,n("#"+r,u.current).addClass("selected");else{var c=n("#"+e.selected,u.current).data("line"),a=n("#"+e.selected,u.current).data("column");r==="".concat(c-1,"-").concat(a)||r==="".concat(c,"-").concat(a-1)||r==="".concat(c,"-").concat(a+1)||r==="".concat(c+1,"-").concat(a)?(n("#"+e.selected,u.current).removeClass("selected"),e.replacement(e.selected,r),e.selected=""):(n("#"+e.selected,u.current).removeClass("selected"),e.selected=r,n("#"+e.selected,u.current).addClass("selected"))}},e.replacement=function(r,c){var a=e.board.lines[n("#"+r,u.current).data("line")][n("#"+r,u.current).data("column")],t=e.board.lines[n("#"+c,u.current).data("line")][n("#"+c,u.current).data("column")],s=l.AK.en[a],o=l.AK.en[t];e.board.lines[n("#"+r,u.current).data("line")][n("#"+r,u.current).data("column")]=t,e.board.lines[n("#"+c,u.current).data("line")][n("#"+c,u.current).data("column")]=a;var i=e.cell.width();if(e.scoreboard.increments("movement"),n("#"+r,u.current).data("line")===n("#"+c,u.current).data("line"))var d="",m="";else if(n("#"+r,u.current).data("line")>n("#"+c,u.current).data("line"))var d="-="+i,m="+="+i;else if(n("#"+r,u.current).data("line")<n("#"+c,u.current).data("line"))var d="+="+i,m="-="+i;if(n("#"+r,u.current).data("column")===n("#"+c,u.current).data("column"))var v="",p="";else if(n("#"+r,u.current).data("column")>n("#"+c,u.current).data("column"))var v="-="+i,p="+="+i;else if(n("#"+r,u.current).data("column")<n("#"+c,u.current).data("column"))var v="+="+i,p="-="+i;n("#"+r,u.current).animate({top:d,left:v},e.animation.velocity,function(){n("#"+r,u.current).css("top",0).css("left",0),n("#"+r,u.current).data("part",t),n("#"+r,u.current).removeClass(s).addClass(o)}),n("#"+c,u.current).animate({top:m,left:p},e.animation.velocity,function(){n("#"+c,u.current).css("top",0).css("left",0),n("#"+c,u.current).data("part",a),n("#"+c,u.current).removeClass(o).addClass(s),e.checkAll2()})},e.somePart=function(r){var c=n("#"+r,u.current).data("line"),a=n("#"+r,u.current).data("column"),t=e.board.lines[c][a];if(0===c)var s=Math.floor(Math.random()*e.parts);else var s=e.board.lines[c-1][a];e.board.lines[c][a]=s;for(let r=c-1;r>=0;r--){var o=String(r)+"-"+String(a);e.caiPart(o)}e.somePartVisual(r,s,t)},e.caiPart=function(r){var c=n("#"+r,u.current).data("line"),a=n("#"+r,u.current).data("column"),t=e.board.lines[c][a];if(0===c)var s=Math.floor(Math.random()*e.parts);else var s=e.board.lines[c-1][a];e.board.lines[c][a]=s,e.fallVisualPart(r,s,t)},e.somePartVisual=function(r,c,a){n("#"+r,u.current).animate({opacity:0},e.animation.velocity,function(){n("#"+r,u.current).css("opacity","1"),n("#"+r,u.current).data("part",c),n("#"+r,u.current).attr("title","id = "+r+" part = "+c),n("#"+r,u.current).removeClass(l.AK.en[a]),n("#"+r,u.current).addClass(l.AK.en[c])})},e.fallVisualPart=function(r,c,a){n("#"+r,u.current).animate({top:e.cell.width()},e.animation.velocity,function(){n("#"+r,u.current).css("top",0),n("#"+r,u.current).data("part",c),n("#"+r,u.current).attr("title","id = "+r+" part = "+c),n("#"+r,u.current).removeClass(l.AK.en[a]),n("#"+r,u.current).addClass(l.AK.en[c])})},e.checkAll2=function(r){r=void 0!==r;var c=e.board.lines.length-1,a=e.board.lines[0].length-1,t=!1;for(let r=c;r>-1&&!1===t;r--)for(let c=a;c>-1&&!1===t;c--)t=e.checkMatch(r,c);!0===t&&e.checkAll2(!0)},e.checkMatch=function(r,c){var a=e.board.lines[r][c],t=a,s=r,o=c,i=0,d=0,u=[],m=[];for(u.push(r+"-"+c),m.push(r+"-"+c);t===a&&s>-1;)s--,d++,-1!==s&&a===(t=e.board.lines[String(s)][String(c)])&&m.push(String(s)+"-"+String(c));for(t=a;t===a&&o>-1;)o--,i++,a===(t=e.board.lines[r][o])&&u.push(r+"-"+o);if(!(i>2)&&!(d>2))return!1;if(d>2){for(var v=m.length-1;v>-1;)e.somePart(m[v]),v--;switch(e.scoreboard.increments("combination"),e.scoreboard.increments("reset movements"),m.length){case 3:e.scoreboard.increments("crack"),a<l.Pg&&e.scoreboard.increments(l.qR[a]);break;case 4:e.scoreboard.increments("block"),a<l.Pg&&e.scoreboard.increments(l.qR[a],4);break;case 5:e.scoreboard.increments("corner"),a<l.Pg&&e.scoreboard.increments(l.qR[a],5)}}if(i>2)switch(n.each(u,function(r,c){e.somePart(c)}),e.scoreboard.increments("combination"),e.scoreboard.increments("reset movements"),u.length){case 3:e.scoreboard.increments("crack"),a<l.Pg&&e.scoreboard.increments(l.qR[a]);break;case 4:e.scoreboard.increments("block"),a<l.Pg&&e.scoreboard.increments(l.qR[a],4);break;case 5:e.scoreboard.increments("corner"),a<l.Pg&&e.scoreboard.increments(l.qR[a],5)}return!0},e.createBoard(9,9),e.mountBoard(n(".match3",u.current)),n(".js-roof",u.current).on("click",function(){e.askForExchange(n(this).attr("id"))}),n("button",u.current).on("click",function(){e.checkAll2()})}return r&&(i.ZP.to(n(".card",u.current),{duration:.3,opacity:1,scale:1,rotate:0,ease:"power4.out",willChange:"transform",delay:.1,stagger:{each:.05,grid:[9,9],axis:null,from:"center"},onComplete:()=>e.checkAll2("luck")}),_=setInterval(()=>{if(x<=0){clearInterval(_);let r=l.qR.reduce((r,c)=>({[c]:e.scoreboard[c],...r}),{score:e.scoreboard.points});N("score/set",{current:r});let c=window.localStorage,a=c.getItem("score");if(a&&e.scoreboard.points>a||!a)for(let e in N("score/set",{best:r}),r)c.setItem(e,r[e]);f.push("/index")}else n(".timer-inner").html("".concat(x/1e3));x-=1e3},1e3)),()=>{clearInterval(_),clearTimeout(x)}},[r]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:"container ".concat(c),ref:u,children:[(0,a.jsx)("div",{ref:m,children:(0,a.jsxs)("div",{className:"rating text_light",children:[(0,a.jsx)("div",{className:"text-s",children:"Sprint"}),(0,a.jsx)("div",{className:"value text-m timer-inner",children:"60"})]})}),(0,a.jsx)("div",{className:"square",children:(0,a.jsx)("div",{className:"match3"})}),(0,a.jsx)("div",{ref:p}),(0,a.jsx)("div",{role:"button",onClick:()=>{b.current&&b.current.open(),h.current&&h.current.restart()},className:"text-s text_light z_0 htplink",children:"how to play"})]}),(0,a.jsxs)(d.Z,{ref:b,className:"htppopup",children:[(0,a.jsx)(v,{ref:h}),(0,a.jsx)("div",{className:"text-s but",role:"button",onClick:()=>{b.current&&b.current.close(),h.current&&h.current.pause()},children:"got it"})]})]})}},8939:function(e){e.exports={container:"HowToPlay_container__6Wr_w",info:"HowToPlay_info__nxJHW",grid:"HowToPlay_grid__pWNTy",card:"HowToPlay_card__g8F93",text:"HowToPlay_text__nyqlh",active:"HowToPlay_active__GFSU_"}},8630:function(e){e.exports={overlay:"Popup_overlay__ouzU9",opened:"Popup_opened__rDW1l",popup:"Popup_popup__bkl21"}}},function(e){e.O(0,[164,888,774,179],function(){return e(e.s=1194)}),_N_E=e.O()}]);
